<!doctype html>
<html lang="cs">
<head>
  <meta charset="UTF-8" />
  <title>DagmarCom – Nastaveni</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header>
    <h1>DagmarCom – Nastaveni</h1>
    <p>Rozhrani pro spravu automatickych odpovedi na WhatsApp cisle +420608877424.</p>
  </header>

  <section class="card">
    <h2>Prihlaseni</h2>
    <label>Heslo (Basic Auth): <input id="password" type="password" placeholder="zadejte heslo" autocomplete="off" /></label>
    <button id="loadSettings">Nacist nastaveni</button>
    <span id="loginStatus"></span>
  </section>

  <section class="card">
    <h2>Automaticke odpovedi</h2>
    <label><input type="checkbox" id="autoEnabled" /> Zapnout odpovidani</label>
  </section>

  <section class="card">
    <h2>OpenAI</h2>
    <label>API klíč
      <div class="inline-input">
        <input id="openaiApiKey" type="password" autocomplete="off" />
        <button type="button" id="toggleApiKey">Zobrazit</button>
        <button type="button" id="deleteApiKey" class="danger">Smazat</button>
        <button type="button" id="saveKeyBtn">Uložit</button>
      </div>
    </label>
    <div class="inline-input">
      <button type="button" id="loadModels">Načíst modely</button>
      <select id="modelSelect"></select>
    </div>
    <label>Model (ruční override)<input id="openaiModel" placeholder="gpt-4.1" /></label>
  </section>

  <section class="card">
    <h2>Email (recepce@hotelchodovasc.cz)</h2>
    <label><input type="checkbox" id="emailAutoEnabled" /> Zapnout emailové odpovědi</label>
    <label>Režim odeslání
      <select id="emailSendMode">
        <option value="draft">Uložit do konceptů</option>
        <option value="send">Odeslat ihned</option>
      </select>
    </label>
    <label>IMAP host<input id="imapHost" /></label>
    <label>IMAP port<input id="imapPort" type="number" value="993" /></label>
    <label>IMAP user<input id="imapUser" /></label>
    <label>IMAP pass<input id="imapPass" type="password" autocomplete="off" /></label>
    <label>Složka INBOX<input id="imapInbox" placeholder="INBOX" /></label>
    <label>Složka SPAM<input id="imapSpam" placeholder="SPAM" /></label>
    <label>Složka Drafts<input id="imapDrafts" placeholder="Drafts" /></label>

    <label>SMTP host<input id="smtpHost" /></label>
    <label>SMTP port<input id="smtpPort" type="number" value="587" /></label>
    <label>SMTP user<input id="smtpUser" /></label>
    <label>SMTP pass<input id="smtpPass" type="password" autocomplete="off" /></label>

    <div class="actions">
      <button id="testEmail">Otestovat IMAP/SMTP</button>
      <button id="runEmailNow">Spustit zpracování inboxu</button>
      <span id="emailStatus"></span>
    </div>
  </section>

  <section class="card">
    <h2>Prompt</h2>
    <label>Instructions – 1. odpoved<textarea id="instructionsFirst"></textarea></label>
    <label>Instructions – dalsi odpoved<textarea id="instructionsNext"></textarea></label>
    <label>Instructions – vzdy<textarea id="instructionsAlways"></textarea></label>

    <label>Role – 1. odpoved<textarea id="roleFirst"></textarea></label>
    <label>Role – dalsi odpoved<textarea id="roleNext"></textarea></label>
    <label>Role – vzdy<textarea id="roleAlways"></textarea></label>

    <label>Context – 1. odpoved<textarea id="contextFirst"></textarea></label>
    <label>Context – dalsi odpoved<textarea id="contextNext"></textarea></label>
    <label>Context – vzdy<textarea id="contextAlways"></textarea></label>

    <label>Input suffix – 1. odpoved<textarea id="inputSuffixFirst"></textarea></label>
    <label>Input suffix – dalsi odpoved<textarea id="inputSuffixNext"></textarea></label>
    <label>Input suffix – vzdy<textarea id="inputSuffixAlways"></textarea></label>

    <label>Output 1. odpoved<textarea id="outputPrefixFirst"></textarea></label>
    <label>Output dalsi<textarea id="outputPrefixNext"></textarea></label>
    <label>Output vse<textarea id="outputPrefixAlways"></textarea></label>
  </section>

  <div class="actions">
    <button id="saveBtn">Ulozit</button>
    <span id="saveStatus"></span>
  </div>

  <section class="card">
    <h2>Logy</h2>
    <div class="filters">
      <input id="filterPhone" placeholder="Telefon" />
      <input id="filterText" placeholder="Fulltext" />
      <button id="loadLogs">Vyhledat</button>
    </div>
    <pre id="logOutput">(zatim nic)</pre>
  </section>

  <script src="settings.js"></script>
</body>
</html>
